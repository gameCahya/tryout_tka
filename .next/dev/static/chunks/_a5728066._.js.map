{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/bangcs/Documents/tryout_tka/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);"],"names":[],"mappings":";;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,oRAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///home/bangcs/Documents/tryout_tka/app/tryout/create/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { supabase } from '@/lib/supabase';\n\ntype TryoutForm = {\n  title: string;\n  total_questions: number;\n  duration_minutes: number;\n  start_time: string | null;\n  end_time: string | null;\n  price: number;\n};\n\nexport default function CreateTryoutPage() {\n  const [formData, setFormData] = useState<TryoutForm>({\n    title: '',\n    total_questions: 10,\n    duration_minutes: 60,\n    start_time: null,\n    end_time: null,\n    price: 0,\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const router = useRouter();\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: name === 'total_questions' || name === 'duration_minutes' || name === 'price' \n        ? parseInt(value) || 0 \n        : value\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Check session\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session) {\n        setError('Sesi tidak ditemukan, silakan login kembali');\n        setLoading(false);\n        return;\n      }\n\n      // Check if user has teacher or admin role\n      const { data: profileData, error: profileError } = await supabase\n        .from('profiles')\n        .select('role')\n        .eq('id', session.user.id)\n        .single();\n\n      if (profileError) {\n        console.error('Error fetching profile:', profileError);\n        setError('Gagal memverifikasi akses pengguna');\n        setLoading(false);\n        return;\n      }\n\n      if (!profileData || !['admin', 'teacher'].includes(profileData.role)) {\n        setError('Anda tidak memiliki akses untuk membuat tryout');\n        setLoading(false);\n        return;\n      }\n\n      // Validate form data\n      if (!formData.title.trim()) {\n        setError('Judul tryout tidak boleh kosong');\n        setLoading(false);\n        return;\n      }\n\n      if (formData.total_questions < 1) {\n        setError('Jumlah soal minimal 1');\n        setLoading(false);\n        return;\n      }\n\n      if (formData.duration_minutes < 1) {\n        setError('Durasi minimal 1 menit');\n        setLoading(false);\n        return;\n      }\n\n      // Create tryout with teacher_id\n      const { data: tryoutData, error: tryoutError } = await supabase\n        .from('tryouts')\n        .insert([{\n          title: formData.title.trim(),\n          total_questions: formData.total_questions,\n          duration_minutes: formData.duration_minutes,\n          start_time: formData.start_time || null,\n          end_time: formData.end_time || null,\n          price: formData.price || 0,\n          teacher_id: session.user.id, // Changed from created_by to teacher_id\n        }])\n        .select()\n        .single();\n\n      if (tryoutError) {\n        console.error('Error creating tryout:', tryoutError);\n        throw tryoutError;\n      }\n\n      if (!tryoutData) {\n        throw new Error('Data tryout tidak ditemukan setelah dibuat');\n      }\n\n      // Redirect to question creation page\n      router.push(`/tryout/${tryoutData.id}/questions`);\n    } catch (err: any) {\n      console.error('Error creating tryout:', err);\n      setError(err.message || 'Gagal membuat tryout');\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 p-4\">\n      <div className=\"max-w-3xl mx-auto\">\n        <div className=\"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 mb-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n              Buat Tryout Baru\n            </h1>\n            <button\n              onClick={() => router.back()}\n              className=\"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors\"\n            >\n              Kembali\n            </button>\n          </div>\n\n          {error && (\n            <div className=\"mb-6 p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 text-red-700 dark:text-red-300 rounded-xl\">\n              {error}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div>\n              <label htmlFor=\"title\" className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                Judul Tryout <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                id=\"title\"\n                name=\"title\"\n                value={formData.title}\n                onChange={handleChange}\n                required\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-gray-50 focus:bg-white dark:bg-gray-700/50 dark:border-gray-600 dark:focus:ring-blue-400 dark:focus:bg-gray-700 dark:text-white\"\n                placeholder=\"Masukkan judul tryout\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label htmlFor=\"total_questions\" className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                  Jumlah Soal <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"total_questions\"\n                  name=\"total_questions\"\n                  value={formData.total_questions}\n                  onChange={handleChange}\n                  min=\"1\"\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-gray-50 focus:bg-white dark:bg-gray-700/50 dark:border-gray-600 dark:focus:ring-blue-400 dark:focus:bg-gray-700 dark:text-white\"\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"duration_minutes\" className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                  Durasi (menit) <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"duration_minutes\"\n                  name=\"duration_minutes\"\n                  value={formData.duration_minutes}\n                  onChange={handleChange}\n                  min=\"1\"\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-gray-50 focus:bg-white dark:bg-gray-700/50 dark:border-gray-600 dark:focus:ring-blue-400 dark:focus:bg-gray-700 dark:text-white\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label htmlFor=\"price\" className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                Harga (Rp)\n              </label>\n              <input\n                type=\"number\"\n                id=\"price\"\n                name=\"price\"\n                value={formData.price}\n                onChange={handleChange}\n                min=\"0\"\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-gray-50 focus:bg-white dark:bg-gray-700/50 dark:border-gray-600 dark:focus:ring-blue-400 dark:focus:bg-gray-700 dark:text-white\"\n                placeholder=\"0 untuk gratis\"\n              />\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                Kosongkan atau isi 0 jika tryout gratis\n              </p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label htmlFor=\"start_time\" className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                  Waktu Mulai (opsional)\n                </label>\n                <input\n                  type=\"datetime-local\"\n                  id=\"start_time\"\n                  name=\"start_time\"\n                  value={formData.start_time || ''}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-gray-50 focus:bg-white dark:bg-gray-700/50 dark:border-gray-600 dark:focus:ring-blue-400 dark:focus:bg-gray-700 dark:text-white\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  Jika diisi, tryout hanya bisa diakses setelah waktu ini\n                </p>\n              </div>\n\n              <div>\n                <label htmlFor=\"end_time\" className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                  Waktu Berakhir (opsional)\n                </label>\n                <input\n                  type=\"datetime-local\"\n                  id=\"end_time\"\n                  name=\"end_time\"\n                  value={formData.end_time || ''}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-gray-50 focus:bg-white dark:bg-gray-700/50 dark:border-gray-600 dark:focus:ring-blue-400 dark:focus:bg-gray-700 dark:text-white\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  Jika diisi, tryout tidak bisa diakses setelah waktu ini\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex justify-end gap-3 pt-4\">\n              <button\n                type=\"button\"\n                onClick={() => router.back()}\n                disabled={loading}\n                className=\"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                Batal\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className={`px-6 py-3 rounded-lg text-white font-semibold transition-colors ${\n                  loading \n                    ? 'bg-blue-400 cursor-not-allowed' \n                    : 'bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600'\n                }`}\n              >\n                {loading ? (\n                  <span className=\"flex items-center gap-2\">\n                    <svg className=\"animate-spin h-5 w-5\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" />\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n                    </svg>\n                    Membuat...\n                  </span>\n                ) : (\n                  'Buat Tryout'\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}