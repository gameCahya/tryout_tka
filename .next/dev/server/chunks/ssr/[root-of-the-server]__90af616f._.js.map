{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///home/bangcs/Documents/tryout_tka/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,iRAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///home/bangcs/Documents/tryout_tka/app/tryout/%5Bid%5D/results/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter, useParams } from 'next/navigation';\nimport { supabase } from '@/lib/supabase';\n\ntype Tryout = {\n  id: string;\n  title: string;\n  total_questions: number;\n};\n\ntype UserResult = {\n  id: string;\n  user_id: string;\n  user_name: string;\n  score: number | null;\n  completed_at: string | null;\n  started_at: string | null;\n};\n\nexport default function TryoutResultsPage() {\n  const router = useRouter();\n  const params = useParams();\n  const tryoutId = params.id as string;\n  \n  const [tryout, setTryout] = useState<Tryout | null>(null);\n  const [results, setResults] = useState<UserResult[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchTryoutResults();\n  }, [tryoutId]);\n\n  const fetchTryoutResults = async () => {\n    setLoading(true);\n    setError(null);\n\n    // Check session\n    const { data: { session } } = await supabase.auth.getSession();\n    if (!session) {\n      setError('Sesi tidak ditemukan, silakan login kembali');\n      setLoading(false);\n      return;\n    }\n\n    // Check if user has teacher or admin role\n    const { data: profileData, error: profileError } = await supabase\n      .from('profiles')\n      .select('role')\n      .eq('id', session.user.id)\n      .single();\n\n    if (profileError || !profileData || !['admin', 'teacher'].includes(profileData.role)) {\n      setError('Anda tidak memiliki akses untuk melihat hasil tryout');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      // Fetch tryout\n      const { data: tryoutData, error: tryoutError } = await supabase\n        .from('tryouts')\n        .select('id, title, total_questions')\n        .eq('id', tryoutId)\n        .single();\n\n      if (tryoutError) throw tryoutError;\n\n      // Fetch results with user information\n      const { data: resultsData, error: resultsError } = await supabase\n        .from('tryout_results')\n        .select(`\n          id,\n          user_id,\n          score,\n          completed_at,\n          started_at,\n          profiles:full_name\n        `)\n        .eq('tryout_id', tryoutId)\n        .order('completed_at', { ascending: false });\n\n      if (resultsError) throw resultsError;\n\n      // Transform data to match our type\n      const transformedResults = resultsData?.map(item => ({\n        id: item.id,\n        user_id: item.user_id,\n        user_name: item.profiles?.full_name || 'User',\n        score: item.score,\n        completed_at: item.completed_at,\n        started_at: item.started_at,\n      })) || [];\n\n      setTryout(tryoutData);\n      setResults(transformedResults);\n    } catch (err: any) {\n      console.error('Error fetching tryout results:', err);\n      setError(err.message || 'Gagal memuat hasil tryout');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 dark:border-blue-400 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600 dark:text-gray-400\">Memuat...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 p-4\">\n      <div className=\"max-w-6xl mx-auto\">\n        <div className=\"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 mb-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                Hasil Tryout: {tryout?.title}\n              </h1>\n              <p className=\"text-gray-600 dark:text-gray-400\">\n                {results.length} siswa telah mengerjakan\n              </p>\n            </div>\n            <button\n              onClick={() => router.back()}\n              className=\"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors\"\n            >\n              Kembali\n            </button>\n          </div>\n\n          {error && (\n            <div className=\"mb-6 p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 text-red-700 dark:text-red-300 rounded-xl\">\n              {error}\n            </div>\n          )}\n\n          {/* Statistics */}\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n            <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700 p-6 rounded-xl shadow-lg text-white\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <p className=\"text-blue-100\">Total Siswa</p>\n                <span className=\"text-2xl\">üë•</span>\n              </div>\n              <p className=\"text-3xl font-bold\">{results.length}</p>\n              <p className=\"text-sm text-blue-100 mt-1\">Siswa</p>\n            </div>\n            \n            <div className=\"bg-gradient-to-br from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 p-6 rounded-xl shadow-lg text-white\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <p className=\"text-green-100\">Selesai</p>\n                <span className=\"text-2xl\">‚úÖ</span>\n              </div>\n              <p className=\"text-3xl font-bold\">{results.filter(r => r.completed_at).length}</p>\n              <p className=\"text-sm text-green-100 mt-1\">Telah selesai</p>\n            </div>\n            \n            <div className=\"bg-gradient-to-br from-yellow-500 to-yellow-600 dark:from-yellow-600 dark:to-yellow-700 p-6 rounded-xl shadow-lg text-white\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <p className=\"text-yellow-100\">Rata-rata</p>\n                <span className=\"text-2xl\">üìä</span>\n              </div>\n              <p className=\"text-3xl font-bold\">\n                {results.length > 0 \n                  ? Math.round(results.filter(r => r.score !== null).reduce((sum, r) => sum + (r.score || 0), 0) / results.filter(r => r.score !== null).length) \n                  : 0}%\n              </p>\n              <p className=\"text-sm text-yellow-100 mt-1\">Nilai rata-rata</p>\n            </div>\n            \n            <div className=\"bg-gradient-to-br from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700 p-6 rounded-xl shadow-lg text-white\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <p className=\"text-purple-100\">Tertinggi</p>\n                <span className=\"text-2xl\">üèÜ</span>\n              </div>\n              <p className=\"text-3xl font-bold\">\n                {results.length > 0 \n                  ? Math.max(...results.filter(r => r.score !== null).map(r => r.score || 0)) \n                  : 0}%\n              </p>\n              <p className=\"text-sm text-purple-100 mt-1\">Nilai tertinggi</p>\n            </div>\n          </div>\n\n          {/* Results Table */}\n          <div>\n            <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n              Daftar Siswa\n            </h2>\n            \n            {results.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <p className=\"text-gray-600 dark:text-gray-400\">Belum ada siswa yang mengerjakan tryout ini</p>\n              </div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                  <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                    <tr>\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Siswa\n                      </th>\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Status\n                      </th>\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Nilai\n                      </th>\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Waktu Selesai\n                      </th>\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Aksi\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                    {results.map((result) => (\n                      <tr key={result.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700/50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                            {result.user_name}\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\n                            result.completed_at \n                              ? 'bg-green-100 text-green-800 dark:bg-green-800/30 dark:text-green-200' \n                              : 'bg-yellow-100 text-yellow-800 dark:bg-yellow-800/30 dark:text-yellow-200'\n                          }`}>\n                            {result.completed_at ? 'Selesai' : 'Belum Selesai'}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                          {result.score !== null ? `${result.score}%` : '-'}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\n                          {result.completed_at \n                            ? new Date(result.completed_at).toLocaleDateString('id-ID') \n                            : '-'}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                          <button\n                            onClick={() => router.push(`/tryout/${tryoutId}/results/${result.user_id}`)}\n                            className=\"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300\"\n                          >\n                            Detail\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}